[Unit]
Wants=localdisplay.service
After=localdisplay.service
After=local-fs.target
After=network.target

[Service]
# Entferne X11-Prüfung - MPD braucht keinen X Server
# ExecStartPre=/bin/bash -c "until [ -f /tmp/.X11-unix/X0 ]; do sleep 1; done"
# Stattdessen: Prüfe nur ob Audio-Hardware verfügbar ist
ExecStartPre=/bin/bash -c 'timeout=20; count=0; until aplay -l 2>/dev/null | grep -q "card"; do sleep 1; count=$((count+1)); if [ $count -ge $timeout ]; then echo "Audio hardware not found after 20s, continuing anyway"; break; fi; done'
# Timeout für Service-Start (verhindert hängen)
TimeoutStartSec=45

