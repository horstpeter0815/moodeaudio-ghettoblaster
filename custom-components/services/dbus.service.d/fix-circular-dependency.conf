[Unit]
# CRITICAL FIX: Break circular dependency
# Systemd error: "Found ordering cycle on basic.target/start"
# Cycle: dbus.service → basic.target → sockets.target → dbus.socket → dbus.service
#
# Solution: Make dbus.service start BEFORE basic.target and NOT wait for it
#
# Clear ALL After= dependencies first (systemd merges, so we must clear)
After=

# Set ONLY what we need - NO basic.target!
After=dbus.socket sysinit.target system.slice systemd-journald.socket

# CRITICAL: Start dbus.service BEFORE basic.target to break the cycle
Before=basic.target

# Prevent systemd from automatically adding basic.target
# This is the key - DefaultDependencies=no prevents auto-dependencies
DefaultDependencies=no

# But we still need these explicit dependencies
Requires=dbus.socket system.slice sysinit.target
