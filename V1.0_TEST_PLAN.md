# v1.0 COMPREHENSIVE TEST & VERIFICATION PLAN

**Date:** 2026-01-19  
**Objective:** Verify custom build is truly v1.0-stable: reliable, fully functional, production-ready.  
**Estimated Time:** 4 hours

---

## ‚úÖ TEST CATEGORIES

### 1. BOOT & SYSTEM (Critical!)

**Boot Sequence:**
- [ ] Pi boots without errors
- [ ] Boot console visible in **landscape** (not portrait)
- [ ] Boot messages readable (no cut-off text)
- [ ] No "Raspberry Pi" logo (disabled via `disable_splash=1`)
- [ ] Boot time < 60 seconds

**System Services:**
```bash
# Run on Pi:
systemctl status mpd
systemctl status camilladsp  
systemctl status localdisplay
systemctl status networking
systemctl status ssh
```
- [ ] MPD: Active & running
- [ ] CamillaDSP: Active & running
- [ ] localdisplay: Active & running
- [ ] NetworkManager: Active
- [ ] SSH: Active & accessible

**Network:**
- [ ] WiFi connects automatically
- [ ] Ethernet works
- [ ] Internet accessible
- [ ] SSH accessible from Mac: `ssh andre@192.168.2.3`
- [ ] Hostname resolves: `ghettoblaster.local`

---

### 2. DISPLAY (Critical!)

**Physical Display:**
- [ ] Display powers on
- [ ] **1280√ó400 landscape orientation** (NOT 400√ó1280 portrait!)
- [ ] No black bars or letterboxing
- [ ] Colors correct (not inverted/washed out)
- [ ] Brightness adequate
- [ ] Touchscreen responsive

**Boot Screen:**
- [ ] Console text in **landscape**
- [ ] `video=HDMI-A-1:1280x400@60` working in cmdline.txt
- [ ] Framebuffer correct size: `fbset` shows 1280√ó400

**X11 Display:**
- [ ] moOde UI loads in **landscape**
- [ ] UI fills entire screen (no 10√ó10 black screen!)
- [ ] Colors load correctly (not black & white)
- [ ] Radio stations visible
- [ ] Album art displays
- [ ] All UI elements sized correctly

**Verification Commands:**
```bash
# On Pi:
grep video /boot/firmware/cmdline.txt  # Should have video=HDMI-A-1:1280x400@60
fbset  # Should show 1280√ó400
xrandr  # Should show 1280√ó400, landscape
sqlite3 /var/local/www/db/moode-sqlite3.db "SELECT value FROM cfg_system WHERE param='hdmi_scn_orient'"  # Should be 'landscape'
```

---

### 3. AUDIO (Critical!)

**HiFiBerry AMP100:**
- [ ] Detected: `aplay -l` shows `sndrpihifiberry`
- [ ] I2C working: `i2cdetect -y 1` shows device at `0x4d`
- [ ] No pops/clicks at startup
- [ ] No hum/noise at idle

**Playback Chain:**
```
MPD ‚Üí _audioout ‚Üí peppy ‚Üí _peppyout ‚Üí CamillaDSP ‚Üí DAC (plughw:1,0)
```

**Tests:**
- [ ] MPD plays music
- [ ] Volume control works (0-100%)
- [ ] No distortion at 50% volume
- [ ] Left/right channels correct
- [ ] Bass response good (40-80 Hz)
- [ ] Mids clear (300 Hz-3 kHz)
- [ ] Highs present (3-15 kHz)

**CamillaDSP:**
- [ ] Service running: `systemctl status camilladsp`
- [ ] Config loaded: `bose_wave_physics_optimized.yml`
- [ ] GUI accessible: `http://ghettoblaster.local:5005`
- [ ] Filters active: Check GUI shows all filters
- [ ] No clipping indicators

**Volume Safety:**
- [ ] **Max volume 75% (191/255)** - NEVER exceed!
- [ ] Current volume check: `mpc volume`
- [ ] If > 75%, reduce immediately: `mpc volume 75`

---

### 4. PEPPYMETER (VU Meters)

**Activation:**
- [ ] Button visible in moOde UI (lower toolbar)
- [ ] Button has unique ID (not shared CSS class)
- [ ] Button click opens PeppyMeter
- [ ] VU meters animate with music
- [ ] Meters in **landscape** orientation
- [ ] Skin: `1280x400-moode` correct

**Touch to Exit:**
- [ ] Touch screen returns to moOde UI
- [ ] Chromium launches correctly
- [ ] No black screen after exit
- [ ] Smooth transition

**FIFO Check:**
```bash
# On Pi:
ls -l /var/lib/mpd/fifos/peppyalsa_output  # Must exist
cat /etc/alsa/conf.d/_audioout.conf  # Check routing
cat /etc/alsa/conf.d/_peppyout.conf  # Check peppy output
systemctl status peppymeter
```

---

### 5. ROOM EQ WIZARD (Room Correction)

**Access:**
- [ ] Menu: Library ‚Üí Advanced ‚Üí Room Correction
- [ ] Wizard loads: `http://ghettoblaster.local/wizard/display.html`
- [ ] UI displays correctly (landscape, 1280√ó400)
- [ ] All buttons visible
- [ ] No layout issues

**Pink Noise:**
- [ ] "Play Pink Noise" button works
- [ ] Noise plays through speakers
- [ ] Volume adjustable
- [ ] "Stop Pink Noise" works
- [ ] No crashes/hangs

**iPhone Microphone:**
- [ ] iPhone connects to wizard URL
- [ ] Microphone permission granted
- [ ] Live measurement visible (spectrum analyzer)
- [ ] Data updates in real-time
- [ ] Frequency response graph shows

**EQ Generation:**
- [ ] "Generate EQ" button works
- [ ] CamillaDSP filters created
- [ ] Filters applied to active config
- [ ] Playback reflects EQ changes
- [ ] No audio glitches during transition

---

### 6. WEB INTERFACE (moOde UI)

**Access:**
- [ ] URL works: `http://ghettoblaster.local`
- [ ] URL works: `http://192.168.2.3`
- [ ] From Mac browser
- [ ] From iPhone browser
- [ ] From Pi's Chromium (local display)

**Playback Controls:**
- [ ] Play/Pause works
- [ ] Stop works
- [ ] Previous/Next track
- [ ] Seek bar functional
- [ ] Volume slider works (0-100%)
- [ ] Mute button works

**Library:**
- [ ] Radio stations visible
- [ ] Playlists load
- [ ] Album art displays
- [ ] Search works
- [ ] Queue management works
- [ ] Add to favorites works

**Settings:**
- [ ] Audio config accessible
- [ ] CamillaDSP settings visible
- [ ] Display settings accessible
- [ ] Network settings work
- [ ] System info accurate

---

### 7. USER "ANDRE" (UID 1000 - CRITICAL!)

**Verification:**
```bash
# On Pi:
id andre  # Must show: uid=1000(andre) gid=1000(andre)
ls -la /home/andre  # Files owned by andre:andre
sudo -u andre moodeutl --version  # Should work without errors
groups andre  # Should include: audio,video,sudo,spi,i2c,gpio,plugdev
```

- [ ] User exists: `id andre`
- [ ] **UID is 1000** (CRITICAL for moOde!)
- [ ] Groups correct: `audio,video,sudo,spi,i2c,gpio`
- [ ] Home directory: `/home/andre` exists
- [ ] Password works: `0815` or from test-password.txt
- [ ] Sudo works: `sudo -u andre ls /root`
- [ ] Can write to /home/andre
- [ ] moOde commands work as andre

---

### 8. CONFIGURATION FILES (Integrity Check)

**Boot Configs:**
```bash
# On Pi:
cat /boot/firmware/cmdline.txt
cat /boot/firmware/config.txt
cat /home/andre/.xinitrc
```

**cmdline.txt Must Have:**
- [ ] `video=HDMI-A-1:1280x400@60`
- [ ] No conflicting display parameters

**config.txt Must Have:**
- [ ] `arm_boost=1`
- [ ] `dtparam=audio=off`
- [ ] `dtoverlay=hifiberry-amp100`
- [ ] `dtoverlay=vc4-kms-v3d-pi5,noaudio`
- [ ] `hdmi_force_hotplug=1`
- [ ] `hdmi_blanking=0`
- [ ] `hdmi_force_edid_audio=0`
- [ ] NO `display_rotate` parameter
- [ ] NO duplicate parameters

**.xinitrc Must:**
- [ ] Read orientation from moOde database
- [ ] Use moodeutl to get hdmi_scn_orient
- [ ] Apply xrandr rotation dynamically
- [ ] NOT have hardcoded rotation

**Audio Configs:**
- [ ] `/usr/share/camilladsp/configs/bose_wave_physics_optimized.yml` exists
- [ ] `/etc/alsa/conf.d/camilladsp.conf` correct
- [ ] `/etc/alsa/conf.d/_audioout.conf` correct
- [ ] `/etc/alsa/conf.d/_peppyout.conf` correct

**Database:**
```bash
# On Pi:
sqlite3 /var/local/www/db/moode-sqlite3.db "SELECT param, value FROM cfg_system WHERE param IN ('hdmi_scn_orient', 'local_display', 'peppy_display', 'camilladsp', 'cdsp_fix_playback')"
```

Expected Values:
- [ ] `hdmi_scn_orient` = `landscape`
- [ ] `local_display` = `1` (enabled)
- [ ] `peppy_display` = `1` (enabled)
- [ ] `camilladsp` = `bose_wave_physics_optimized.yml`
- [ ] `cdsp_fix_playback` = `Yes`

---

### 9. STRESS TESTS (Stability)

**Long-Running:**
- [ ] Play music for 2 hours continuously
- [ ] No crashes
- [ ] No audio dropouts
- [ ] Temperature < 75¬∞C: `vcgencmd measure_temp`
- [ ] Memory usage stable: `free -h`
- [ ] No service restarts: `systemctl status mpd camilladsp`

**Rapid Switching:**
- [ ] Toggle PeppyMeter on/off 10√ó quickly
- [ ] Switch tracks rapidly 20√ó
- [ ] Change volume rapidly 20√ó
- [ ] Open/close Room EQ Wizard 5√ó
- [ ] Rapid playlist changes
- [ ] No crashes, hangs, or black screens

**Network:**
- [ ] WiFi disconnect/reconnect
- [ ] Ethernet disconnect/reconnect
- [ ] SSH sessions remain stable
- [ ] Web UI remains accessible
- [ ] No zombie processes

**Reboot Test:**
- [ ] Clean reboot: `sudo reboot`
- [ ] Boots correctly after reboot
- [ ] All services start automatically
- [ ] Settings preserved

---

### 10. PERFORMANCE (Benchmarks)

**Boot Time:**
```bash
# On Pi:
systemd-analyze
systemd-analyze blame | head -20
```
- [ ] Total boot < 60 seconds
- [ ] No services taking > 10 seconds
- [ ] Parallel startup working

**Audio Latency:**
- [ ] Play/pause response < 500ms
- [ ] Volume change response immediate
- [ ] Track skip < 1 second
- [ ] UI controls responsive

**System Resources:**
```bash
# On Pi:
top  # Check CPU/RAM usage
df -h  # Check disk usage
vcgencmd measure_temp  # Check temperature
```
- [ ] CPU idle < 20%
- [ ] RAM usage < 2GB
- [ ] Disk usage < 15GB (of 58GB)
- [ ] Temperature < 65¬∞C at idle
- [ ] No memory leaks over time

---

## üö® FAILURE CRITERIA

### Show-stoppers (Block v1.0):
- ‚ùå Display in wrong orientation
- ‚ùå Audio not working
- ‚ùå PeppyMeter crashes
- ‚ùå User andre not UID 1000
- ‚ùå System crashes/reboots spontaneously
- ‚ùå Boot screen not visible
- ‚ùå SSH not accessible

### Must-fix (Before calling it v1.0):
- ‚ö†Ô∏è Room EQ Wizard not working
- ‚ö†Ô∏è Radio stations not visible
- ‚ö†Ô∏è Volume > 75% (safety!)
- ‚ö†Ô∏è Critical services not starting
- ‚ö†Ô∏è Network unstable
- ‚ö†Ô∏è Touchscreen not working

### Nice-to-fix (Can wait):
- ‚ÑπÔ∏è Boot time > 60 seconds
- ‚ÑπÔ∏è Minor UI glitches
- ‚ÑπÔ∏è Non-critical services disabled
- ‚ÑπÔ∏è Performance not optimal

---

## üìä TEST EXECUTION PLAN

### Phase 1: First Boot (30 min)
1. Insert SD card into Pi
2. Power on Pi
3. Observe boot sequence (watch for errors)
4. Check display orientation during boot
5. Wait for moOde UI to load
6. Test SSH access from Mac
7. Run initial system status checks

### Phase 2: Display Verification (15 min)
8. Verify landscape orientation (1280√ó400)
9. Check UI elements load completely
10. Test touchscreen responsiveness
11. Toggle PeppyMeter on/off
12. Check for black screens or glitches
13. Verify colors and radio stations

### Phase 3: Audio Verification (30 min)
14. Test playback at 30% volume
15. Verify CamillaDSP active
16. Test volume control (0-100%)
17. Listen for distortion/clipping
18. Check left/right channels
19. Test different audio formats

### Phase 4: Feature Testing (45 min)
20. Test Room EQ Wizard completely
21. Test radio stations
22. Test playlists and queue
23. Test PeppyMeter animations
24. Test web UI from Mac/iPhone
25. Test all moOde features

### Phase 5: Stability Testing (2 hours)
26. Long-running playback test
27. Rapid switching tests
28. Network disconnect/reconnect
29. Monitor temperature continuously
30. Check for crashes or errors
31. Monitor system resources

### Phase 6: Final Verification (15 min)
32. Re-run system status checks
33. Verify all configs still intact
34. Document any issues found
35. Take screenshots of working system
36. Backup configs to GitHub
37. Tag as v1.0-stable if all pass

**Total Test Time:** ~4 hours

---

## ‚úÖ v1.0 CERTIFICATION CRITERIA

**To be certified v1.0-stable, ALL must be true:**
- [ ] All **critical** tests pass
- [ ] Zero **show-stoppers**
- [ ] All **must-fix** items resolved
- [ ] Runs stable for 2+ hours without issues
- [ ] Fully documented & reproducible
- [ ] Configs backed up to GitHub
- [ ] Tagged as `v1.0-stable` in git
- [ ] Can be rebuilt from scratch using custom build

**When certified:**
- [ ] Train Ollama with proven knowledge
- [ ] Create comprehensive documentation
- [ ] Share working image (if desired)
- [ ] Celebrate! üéâ

---

## üìù TEST RESULTS TEMPLATE

```markdown
# v1.0 Test Results

**Date:** YYYY-MM-DD
**Tester:** Andre
**Image:** moode-r1001-arm64-YYYYMMDD_HHMMSS-lite.img

## Results Summary
- Total Tests: X
- Passed: X
- Failed: X
- Blocked: X

## Critical Issues Found:
1. [Issue description]
2. [Issue description]

## Must-Fix Issues:
1. [Issue description]

## Nice-to-Fix Issues:
1. [Issue description]

## Overall Status: ‚úÖ PASS / ‚ùå FAIL / ‚è≥ IN PROGRESS

## Notes:
[Additional observations]
```

---

**This test plan ensures we have a TRULY working v1.0 before training Ollama!** üéØ
